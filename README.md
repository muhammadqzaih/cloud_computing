# UrgentNews Full-Stack Application

This project is a full-stack application for displaying urgent news. It consists of three main components:
- **Database (MySQL):** Stores news data.
- **Backend (Express/Node.js):** Provides a REST API to access the news data.
- **Frontend (React):** Displays news and interacts with the backend.

All components are containerized using Docker and orchestrated with Docker Compose. This README explains the project structure, Dockerfiles, and all necessary commands.

---

## Project Structure

![image](https://github.com/user-attachments/assets/0f11d7e4-656c-47c1-865e-93dec12340dd)



---

## Docker Files Overview

### 1. **Backend Dockerfile (`backend/Dockerfile`)**

- **Purpose:** Build an image for the Express backend.
- **Key Steps:**
  - Use the Node.js 18 image.
  - Set the working directory.
  - Copy `package*.json` and install dependencies.
  - Copy all source files.
  - Expose port 5000.
  - Start the server with `node server.js`.

```dockerfile
FROM node:18

WORKDIR /app

# Copy package files and install dependencies
COPY package*.json ./
RUN npm install

# Copy the rest of your application code
COPY . .

# Expose port 5000 for the backend
EXPOSE 5000

# Start the Express server
CMD ["node", "server.js"]

```
2. Database Dockerfile (db/Dockerfile)
Purpose: Build an image for the MySQL database.
Key Steps:
Use the latest MySQL image.
Set environment variables for the root password and database name.
Copy init.sql to the special directory /docker-entrypoint-initdb.d/ so that MySQL will run it on first startup.
Expose the default MySQL port 3306.
```
FROM mysql:latest

ENV MYSQL_ROOT_PASSWORD=Mohammad111222333@
ENV MYSQL_DATABASE=urgentNewsDB

# Copy initialization SQL script to automatically set up the database
COPY init.sql /docker-entrypoint-initdb.d/

EXPOSE 3306
```
3. Frontend Dockerfile (frontend/news_fornt_app/Dockerfile)
Purpose: Build and serve a production-ready React application.
Multi-Stage Build:
Stage 1 (Build Stage):
Uses Node.js 18 to install dependencies and build the React app.
Stage 2 (Runtime Stage):
Uses an Nginx image to serve the static files generated by the build.
Key Steps:
Build the React application.
Copy the build output into the Nginx container.
Expose port 80 (Nginx default).


# Stage 1: Build the React app
```dockerfile
FROM node:18 AS build

WORKDIR /app

# Copy package files and install dependencies
COPY package*.json ./
RUN npm install

# Copy the entire React app source code and build the production files
COPY . .
RUN npm run build

# Stage 2: Serve the app using Nginx
FROM nginx:alpine

# Remove default Nginx static assets
RUN rm -rf /usr/share/nginx/html/*

# Copy the built React app from the previous stage to Nginx's directory
COPY --from=build /app/build /usr/share/nginx/html

# Expose port 80 (for Nginx)
EXPOSE 80

# Run Nginx in the foreground
CMD ["nginx", "-g", "daemon off;"]

```

Docker Compose File
The docker-compose.yml file orchestrates the three services (database, backend, and frontend) using Docker Hub images (after they are built and pushed).

```dockerfile

services:
  db:
    image: muhammadqzih/urgentnews_db:latest  # Docker Hub repository for MySQL image
    container_name: mysql_container
    environment:
      MYSQL_ROOT_PASSWORD: Mohammad111222333@
      MYSQL_DATABASE: urgentNewsDB
    ports:
      - "3307:3306"  # Maps host port 3307 to container port 3306
    volumes:
      - mysql_data:/var/lib/mysql

  backend:
    image: muhammadqzih/urgentnews_backend:latest  # Docker Hub repository for Express backend
    container_name: express_backend
    depends_on:
      - db
    environment:
      DB_HOST: db
      DB_USER: root
      DB_PASSWORD: Mohammad111222333@
      DB_NAME: urgentNewsDB
    ports:
      - "5000:5000"

  frontend:
    image: muhammadqzih/urgentnews_react_frontend:latest  # Docker Hub repository for React app
    container_name: react_frontend
    depends_on:
      - backend
    ports:
      - "3000:80"  # Maps host port 3000 to container port 80

volumes:
  mysql_data:
Notes on Networking:

Docker Compose automatically creates a default network so that services can communicate with each other using their service names (e.g., the backend connects to MySQL using db as the hostname).
```

## Commands Summary

docker-compose up --build -d  
docker ps  
docker logs express_backend  
docker logs -f express_backend  
docker-compose down  
docker rm -f mysql_container express_backend react_frontend  
docker login  
docker tag urgentnews_db muhammadqzih/urgentnews_db:latest  
docker tag urgentnews_backend muhammadqzih/urgentnews_backend:latest  
docker tag react_frontend muhammadqzih/urgentnews_react_frontend:latest  
docker push muhammadqzih/urgentnews_db:latest  
docker push muhammadqzih/urgentnews_backend:latest  
docker push muhammadqzih/urgentnews_react_frontend:latest  
docker-compose pull  
docker-compose up -d  
docker-compose logs  
docker-compose stop  
docker-compose restart  
docker exec -it express_backend bash  
docker images  
docker rmi <image_name>


    
